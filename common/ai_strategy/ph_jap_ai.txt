JAP_peace_west_before_ph = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_global_flag = vnr_pearl_harbor_ongoing
        NOT = { has_global_flag = vnr_attack_on_pearl_harbor }
        NOT = { has_war_with = USA }
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        id = USA
        type = conquer
        value = -1000
    }
    ai_strategy = {
        id = PHI
        type = conquer
        value = -1000
    }
    ai_strategy = {
        id = MAL
        type = conquer
        value = -1000
    }
    ai_strategy = {
        id = INS
        type = conquer
        value = -1000
    }
	ai_strategy = {
        id = USA
        type = declare_war
        value = -1000
    }
    ai_strategy = {
        id = PHI
        type = declare_war
        value = -1000
    }
    ai_strategy = {
        id = MAL
        type = declare_war
        value = -1000
    }
    ai_strategy = {
        id = INS
        type = declare_war
        value = -1000
    }
	ai_strategy = {
        id = USA
        type = consider_weak
        value = -1000
    }
    ai_strategy = {
        id = PHI
        type = consider_weak
        value = -1000
    }
    ai_strategy = {
        id = MAL
        type = consider_weak
        value = -1000
    }
    ai_strategy = {
        id = INS
        type = consider_weak
        value = -1000
    }
	
	ai_strategy = {
		type = force_build_armies
		value = 100
	}
}

JAP_prepare_SEA_invasion = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_global_flag = vnr_pearl_harbor_ongoing
        country_exists = MAL
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = area_priority
        id = burma
        value = 100
    }
	ai_strategy = {
        type = prepare_for_war
        id = MAL
        value = 100
    }
}

JAP_spare_more_units_for_pacific = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        OR = {
            has_global_flag = vnr_pearl_harbor_ongoing
            has_war_with = USA
        }
        any_enemy_country = { is_literally_china = yes }
        CHI = {
            is_ai = yes
        }
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = front_control
        country_trigger = { is_literally_china = yes }
        priority = 100
        ordertype = front
        ratio = 0.6
        execution_type = careful
        manual_attack = yes
        execute_order = yes
    }
    ai_strategy = {
        type = front_unit_request
        country_trigger = { is_literally_china = yes }
        value = -35
    }
}

JAP_focus_SEA_ph = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_global_flag = vnr_attack_on_pearl_harbor
        OR = {
            PHI = { has_capitulated = no }
            MAL = { has_capitulated = no }
            INS = { has_capitulated = no }
        }
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = area_priority
        id = pacific
        value = 10
    }
    ai_strategy = {
        type = area_priority
        id = oceania
        value = 10
    }
    ai_strategy = {
        type = area_priority
        id = east_indies
        value = 150
    }
    ai_strategy = {
        type = area_priority
        id = burma
        value = 50
    }
	ai_strategy = {
        type = area_priority
        id = malaya
        value = 250
    }
	ai_strategy = {
        type = area_priority
        id = just_philippines
        value = 250
    }
}

JAP_naval_invade_PHI = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_global_flag = vnr_attack_on_pearl_harbor
        has_war_with = PHI
        PHI = {
            has_capitulated = no
        }
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = invade
        id = PHI
        value = 200
    }
    ai_strategy = {
        type = naval_mission_threshold
        id = MISSION_NAVAL_INVASION_SUPPORT
        value = -1
    }
}

JAP_naval_invade_MAL = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_global_flag = vnr_attack_on_pearl_harbor
        has_war_with = MAL
        MAL = {
            has_capitulated = no
        }
    }
    abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		tag = MAL
		value = 60
	}
    ai_strategy = {
		type = front_control

		tag = MAL

		ratio = 0.5

		priority = 200
		ordertype = front
		execution_type = rush_weak
        execute_order = yes
	}
}

JAP_naval_invade_INS = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_global_flag = vnr_attack_on_pearl_harbor
        has_war_with = INS
        INS = {
            has_capitulated = no
        }
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = invade
        id = INS
        value = 500
    }
    ai_strategy = {
        type = naval_mission_threshold
        id = MISSION_NAVAL_INVASION_SUPPORT
        value = -1
    }
}

JAP_defend_home_islands = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        is_subject = no
        has_war_with = USA
        has_global_flag = operation_downfall_flag
    }
    abort_when_not_enabled = yes
    ai_strategy = {
        type = area_priority
        id = just_japan
        value = 1000
    }
    ai_strategy = {
        type = put_unit_buffers
        ratio = 10
        states = {
            282
            528
            529
            530
            531
            532
            533
            534
            535
            536
            555
        }
        area = just_japan
    }
    ai_strategy = {
        type = spare_unit_factor
        value = -1000
    }
}

JAP_take_US_islands = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_war_with = USA
    }
    abort_when_not_enabled = yes
    ai_strategy = {
        type = invade
        id = USA
        value = 100
    }
}

JAP_build_army_before_invade_CHI = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        date < 1939.1.1
        has_war = no
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = build_army
        id = infantry
        value = 200
    }
    ai_strategy = {
        type = build_army
        id = garrison
        value = 50
    }
}

JAP_build_army_early_invasion = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        date < 1939.1.1
        has_war = yes
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = build_army
        id = infantry
        value = 200
    }
    ai_strategy = {
        type = build_army
        id = garrison
        value = 50
    }
    ai_strategy = {
        type = build_army
        id = suppression
        value = 30
    }
}

JAP_build_army_before_war_USA = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        date > 1939.1.2
        NOT = { has_war_with = USA }
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = build_army
        id = infantry
        value = 300
    }
    ai_strategy = {
        type = build_army
        id = garrison
        value = 80
    }
    ai_strategy = {
        type = build_army
        id = suppression
        value = 30
    }
    ai_strategy = {
        type = build_army
        id = marines
        value = 20
    }
}

JAP_build_army_war_USA = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        date > 1939.1.2
        NOT = { has_war_with = USA }
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = build_army
        id = infantry
        value = 400
    }
    ai_strategy = {
        type = build_army
        id = garrison
        value = 80
    }
    ai_strategy = {
        type = build_army
        id = suppression
        value = 50
    }
    ai_strategy = {
        type = build_army
        id = armor
        value = 10
    }
    ai_strategy = {
        type = build_army
        id = marines
        value = 20
    }
}

JAP_invade_shanghai = {
    allowed = {
        original_tag = JAP
    }
    enable = {
        has_war_with = CHI
        ph_JAP_has_idea_JAP_intervene_in_china = no
    }
    abort_when_not_enabled = yes

    ai_strategy = {
        type = invade
        id = "CHI"
        value = 1000
    }
    ai_strategy = {
        type = invasion_unit_request
        state = 613
        value = 200
    }
}